<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="fonts.lug.ustc.edu.cn/css?family=Monda:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|Amita:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tony1am.github.io","root":"/","scheme":"Gemini","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":12,"offset":8,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="写在前面： 本文主要通过探索《零基础入门数据挖掘 - 二手车交易价格预测》比赛数据，以实践的方式复盘探索性数据分析的各项主要操作。  什么是 EDA ，以及为什么 EDA EDA (Exploratory Data Analysis, 即探索性数据分析) 可以帮助我们实现以下目的：  更好的理解数据 建立对数据的直观印象 产生假设 寻找分析灵感  不管是参加数据挖掘比赛，还是在实际工作中开展数据分">
<meta property="og:type" content="article">
<meta property="og:title" content="二手车交易价格预测之EDA">
<meta property="og:url" content="https://tony1am.github.io/blog/2020/03/24/Used-Cars-Price-Predition-EDA/index.html">
<meta property="og:site_name" content="Coding Barber">
<meta property="og:description" content="写在前面： 本文主要通过探索《零基础入门数据挖掘 - 二手车交易价格预测》比赛数据，以实践的方式复盘探索性数据分析的各项主要操作。  什么是 EDA ，以及为什么 EDA EDA (Exploratory Data Analysis, 即探索性数据分析) 可以帮助我们实现以下目的：  更好的理解数据 建立对数据的直观印象 产生假设 寻找分析灵感  不管是参加数据挖掘比赛，还是在实际工作中开展数据分">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="d:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Cprice.png">
<meta property="og:image" content="d:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Cprice-log.png">
<meta property="og:image" content="d:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Ccorr.png">
<meta property="article:published_time" content="2020-03-24T12:16:15.000Z">
<meta property="article:modified_time" content="2020-03-24T13:51:30.824Z">
<meta property="article:author" content="Tony Lam">
<meta property="article:tag" content="Competition">
<meta property="article:tag" content="Novice">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Cprice.png">

<link rel="canonical" href="https://tony1am.github.io/blog/2020/03/24/Used-Cars-Price-Predition-EDA/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>二手车交易价格预测之EDA | Coding Barber</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Coding Barber</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Heads To Machine Learning.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://tony1am.github.io/blog/2020/03/24/Used-Cars-Price-Predition-EDA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Tony Lam">
      <meta itemprop="description" content="Beyond cutting and trimming.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Barber">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          二手车交易价格预测之EDA
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 20:16:15 / Modified: 21:51:30" itemprop="dateCreated datePublished" datetime="2020-03-24T20:16:15+08:00">2020-03-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Notes/" itemprop="url" rel="index"><span itemprop="name">Notes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Notes/Data-Science/" itemprop="url" rel="index"><span itemprop="name">Data Science</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>写在前面：</p>
<p>本文主要通过探索《零基础入门数据挖掘 - 二手车交易价格预测》<a href="https://tianchi.aliyun.com/competition/entrance/231784/introduction?spm=5176.12281957.1004.1.38b02448ausjSX" target="_blank" rel="noopener">比赛数据</a>，以实践的方式复盘探索性数据分析的各项主要操作。</p>
<h2 id="font-color-chocolate什么是-eda-以及为什么-edafont"><a class="markdownIt-Anchor" href="#font-color-chocolate什么是-eda-以及为什么-edafont"></a> <font color = 'chocolate'>什么是 EDA ，以及为什么 EDA</font></h2>
<p>EDA (Exploratory Data Analysis, 即探索性数据分析) 可以帮助我们实现以下目的：</p>
<ul>
<li>更好的理解数据</li>
<li>建立对数据的直观印象</li>
<li>产生假设</li>
<li>寻找分析灵感</li>
</ul>
<p>不管是参加数据挖掘比赛，还是在实际工作中开展数据分析都离不开 EDA。在进一步展开操作之前，我们首先要了解数据背后可能代表的实际意义。尽可能全方位建立分析对象数据的直观印象。通过逐步深入了解数据的分布规律来产生假设，这一步将和数据分析这项工作的目的紧密结合在一起。最后，前面获取的这些信息将会帮助我们更好的选用合适的模型来进行训练，得到预测结果。</p>
<a id="more"></a>
<h2 id="font-color-chocolate如何-edafont"><a class="markdownIt-Anchor" href="#font-color-chocolate如何-edafont"></a> <font color = 'chocolate'>如何 EDA</font></h2>
<h3 id="font-color-chocolate工具font"><a class="markdownIt-Anchor" href="#font-color-chocolate工具font"></a> <font color = 'chocolate'>工具</font></h3>
<p>绝大多数数据科学家都采用 R 或者 Python 来完成他们的工作。本文主要采用 Python 语言来解决。需要用到的主力库如下：</p>
<ol>
<li>
<p>数值计算与统计</p>
<pre><code> - numpy、pandas、scipy
</code></pre>
</li>
<li>
<p>可视化</p>
<p>​	- matplotlib、seaborn</p>
</li>
</ol>
<h3 id="font-color-chocolate分析操作font"><a class="markdownIt-Anchor" href="#font-color-chocolate分析操作font"></a> <font color = 'chocolate'>分析操作</font></h3>
<ol>
<li>导入训练集和测试集</li>
<li>预览数据 <code>.head()</code>, <code>df.tail()</code>，并打印两个数据集的 df<code>.shape</code></li>
<li>检查两数据集的数值类型，初步判断有无缺失值 <code>df.info()</code></li>
<li>数据的描述性统计 <code>df.describe()</code>， 检查每个统计量（重点：count， mean， std， min， max；std 接近或等于0的可以暂时忽略了, min=0 或 max=9999 要想想是否合理）</li>
<li>统计每列缺失值数量、占比</li>
<li>分析预测值的分布，检查离群点。若与正态分布相差太远可考虑进行转换 <code>np.log1p(y)</code>, <code>y^0.5</code>, <code>y^0.33</code> 等等</li>
<li>对每列的数据类型进行必要的转换（如：日期类型，文本类型等）</li>
<li>数字特征分析
<ul>
<li>相关系数 <code>df.corr()</code>, <code>sns.heatmap()</code></li>
<li><code>数据分布</code>plt.hist()<code>,</code>sns.displot()</li>
<li>偏度和峰度（相对于标准高斯分布而言）<code>df.skew()</code>, <code>df.kurt()</code></li>
<li>特征之间的相互关系 <code>sns.pairplot()</code>, <code>sns.regplot()</code></li>
</ul>
</li>
<li>类型特征分析
<ul>
<li>unique 分布 <code>.unique</code>, <code>df.nunique()</code></li>
<li>箱形图可视化 <code>sns.boxplot()</code></li>
<li>小提琴图可视化 <code>sns.volinplot()</code></li>
<li>柱形图可视化 <code>sns.barplot()</code></li>
<li>每个类别频数可视化(count_plot) <code>sns.countplot()</code></li>
</ul>
</li>
</ol>
<h3 id="font-color-chocolate开始分析font"><a class="markdownIt-Anchor" href="#font-color-chocolate开始分析font"></a> <font color = 'chocolate'>开始分析</font></h3>
<h4 id="font-color-chocolate导入相关的库font"><a class="markdownIt-Anchor" href="#font-color-chocolate导入相关的库font"></a> <font color = 'chocolate'>导入相关的库</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">pd.set_option(&#39;display.max_columns&#39;, None) # 避免输出表格中间的列被折叠</span><br><span class="line"></span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line"></span><br><span class="line">import warnings</span><br><span class="line">warnings.filterwarnings(&#39;ignore&#39;)</span><br></pre></td></tr></table></figure>
<h4 id="font-color-chocolate1-导入训练集和测试集font"><a class="markdownIt-Anchor" href="#font-color-chocolate1-导入训练集和测试集font"></a> <font color = 'chocolate'>1. 导入训练集和测试集</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 1) 载入训练集和测试集；</span><br><span class="line">path &#x3D; &#39;.&#x2F;datalab&#x2F;231784&#x2F;&#39;</span><br><span class="line">Train_data &#x3D; pd.read_csv(path+&#39;used_car_train_20200313.csv&#39;, sep&#x3D;&#39; &#39;)</span><br><span class="line">Test_data &#x3D; pd.read_csv(path+&#39;used_car_testA_20200313.csv&#39;, sep&#x3D;&#39; &#39;)</span><br><span class="line"># 打印 .shape</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(150000, 31) </span><br><span class="line"> (50000, 30)</span><br></pre></td></tr></table></figure>
<h4 id="font-color-chocolate2-预览数据font"><a class="markdownIt-Anchor" href="#font-color-chocolate2-预览数据font"></a> <font color = 'chocolate'>2. 预览数据</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Train_data.head(3).append(Train_data.tail(3))</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">SaleID</th>
<th style="text-align:right">name</th>
<th style="text-align:right">regDate</th>
<th style="text-align:right">model</th>
<th style="text-align:right">brand</th>
<th style="text-align:right">bodyType</th>
<th style="text-align:right">fuelType</th>
<th style="text-align:right">gearbox</th>
<th style="text-align:right">power</th>
<th style="text-align:right">kilometer</th>
<th style="text-align:right">…</th>
<th style="text-align:right">v_5</th>
<th style="text-align:right">v_6</th>
<th style="text-align:right">v_7</th>
<th style="text-align:right">v_8</th>
<th style="text-align:right">v_9</th>
<th style="text-align:right">v_10</th>
<th style="text-align:right">v_11</th>
<th style="text-align:right">v_12</th>
<th style="text-align:right">v_13</th>
<th style="text-align:right">v_14</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">736</td>
<td style="text-align:right">20040402</td>
<td style="text-align:right">30.0</td>
<td style="text-align:right">6</td>
<td style="text-align:right">1.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">60</td>
<td style="text-align:right">12.5</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.235676</td>
<td style="text-align:right">0.101988</td>
<td style="text-align:right">0.129549</td>
<td style="text-align:right">0.022816</td>
<td style="text-align:right">0.097462</td>
<td style="text-align:right">-2.881803</td>
<td style="text-align:right">2.804097</td>
<td style="text-align:right">-2.420821</td>
<td style="text-align:right">0.795292</td>
<td style="text-align:right">0.914762</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2262</td>
<td style="text-align:right">20030301</td>
<td style="text-align:right">40.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">15.0</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.264777</td>
<td style="text-align:right">0.121004</td>
<td style="text-align:right">0.135731</td>
<td style="text-align:right">0.026597</td>
<td style="text-align:right">0.020582</td>
<td style="text-align:right">-4.900482</td>
<td style="text-align:right">2.096338</td>
<td style="text-align:right">-1.030483</td>
<td style="text-align:right">-1.722674</td>
<td style="text-align:right">0.245522</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:right">14874</td>
<td style="text-align:right">20040403</td>
<td style="text-align:right">115.0</td>
<td style="text-align:right">15</td>
<td style="text-align:right">1.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">163</td>
<td style="text-align:right">12.5</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.251410</td>
<td style="text-align:right">0.114912</td>
<td style="text-align:right">0.165147</td>
<td style="text-align:right">0.062173</td>
<td style="text-align:right">0.027075</td>
<td style="text-align:right">-4.846749</td>
<td style="text-align:right">1.803559</td>
<td style="text-align:right">1.565330</td>
<td style="text-align:right">-0.832687</td>
<td style="text-align:right">-0.229963</td>
</tr>
<tr>
<td style="text-align:right">149997</td>
<td style="text-align:right">149997</td>
<td style="text-align:right">147587</td>
<td style="text-align:right">20101003</td>
<td style="text-align:right">60.0</td>
<td style="text-align:right">11</td>
<td style="text-align:right">1.0</td>
<td style="text-align:right">1.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">90</td>
<td style="text-align:right">6.0</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.233353</td>
<td style="text-align:right">0.000705</td>
<td style="text-align:right">0.118872</td>
<td style="text-align:right">0.100118</td>
<td style="text-align:right">0.097914</td>
<td style="text-align:right">2.439812</td>
<td style="text-align:right">-1.630677</td>
<td style="text-align:right">2.290197</td>
<td style="text-align:right">1.891922</td>
<td style="text-align:right">0.414931</td>
</tr>
<tr>
<td style="text-align:right">149998</td>
<td style="text-align:right">149998</td>
<td style="text-align:right">45907</td>
<td style="text-align:right">20060312</td>
<td style="text-align:right">34.0</td>
<td style="text-align:right">10</td>
<td style="text-align:right">3.0</td>
<td style="text-align:right">1.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">156</td>
<td style="text-align:right">15.0</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.256369</td>
<td style="text-align:right">0.000252</td>
<td style="text-align:right">0.081479</td>
<td style="text-align:right">0.083558</td>
<td style="text-align:right">0.081498</td>
<td style="text-align:right">2.075380</td>
<td style="text-align:right">-2.633719</td>
<td style="text-align:right">1.414937</td>
<td style="text-align:right">0.431981</td>
<td style="text-align:right">-1.659014</td>
</tr>
<tr>
<td style="text-align:right">149999</td>
<td style="text-align:right">149999</td>
<td style="text-align:right">177672</td>
<td style="text-align:right">19990204</td>
<td style="text-align:right">19.0</td>
<td style="text-align:right">28</td>
<td style="text-align:right">6.0</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">1.0</td>
<td style="text-align:right">193</td>
<td style="text-align:right">12.5</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.284475</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.040072</td>
<td style="text-align:right">0.062543</td>
<td style="text-align:right">0.025819</td>
<td style="text-align:right">1.978453</td>
<td style="text-align:right">-3.179913</td>
<td style="text-align:right">0.031724</td>
<td style="text-align:right">-1.483350</td>
<td style="text-align:right">-0.342674</td>
</tr>
</tbody>
</table>
<p>6 rows × 31 columns</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 打印列名</span><br><span class="line">Train_data.columns</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Index([&#39;SaleID&#39;, &#39;name&#39;, &#39;regDate&#39;, &#39;model&#39;, &#39;brand&#39;, &#39;bodyType&#39;, &#39;fuelType&#39;,</span><br><span class="line">       &#39;gearbox&#39;, &#39;power&#39;, &#39;kilometer&#39;, &#39;notRepairedDamage&#39;, &#39;regionCode&#39;,</span><br><span class="line">       &#39;seller&#39;, &#39;offerType&#39;, &#39;creatDate&#39;, &#39;price&#39;, &#39;v_0&#39;, &#39;v_1&#39;, &#39;v_2&#39;, &#39;v_3&#39;,</span><br><span class="line">       &#39;v_4&#39;, &#39;v_5&#39;, &#39;v_6&#39;, &#39;v_7&#39;, &#39;v_8&#39;, &#39;v_9&#39;, &#39;v_10&#39;, &#39;v_11&#39;, &#39;v_12&#39;,</span><br><span class="line">       &#39;v_13&#39;, &#39;v_14&#39;],</span><br><span class="line">      dtype&#x3D;&#39;object&#39;)</span><br></pre></td></tr></table></figure>
<p>这里贴一下特征的描述：</p>
<table>
<thead>
<tr>
<th><strong>Field</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>SaleID</td>
<td>交易ID，唯一编码</td>
</tr>
<tr>
<td>name</td>
<td>汽车交易名称，已脱敏</td>
</tr>
<tr>
<td>regDate</td>
<td>汽车注册日期，例如20160101，2016年01月01日</td>
</tr>
<tr>
<td>model</td>
<td>车型编码，已脱敏</td>
</tr>
<tr>
<td>brand</td>
<td>汽车品牌，已脱敏</td>
</tr>
<tr>
<td>bodyType</td>
<td>车身类型：豪华轿车：0，微型车：1，厢型车：2，大巴车：3，敞篷车：4，双门汽车：5，商务车：6，搅拌车：7</td>
</tr>
<tr>
<td>fuelType</td>
<td>燃油类型：汽油：0，柴油：1，液化石油气：2，天然气：3，混合动力：4，其他：5，电动：6</td>
</tr>
<tr>
<td>gearbox</td>
<td>变速箱：手动：0，自动：1</td>
</tr>
<tr>
<td>power</td>
<td>发动机功率：范围 [ 0, 600 ]</td>
</tr>
<tr>
<td>kilometer</td>
<td>汽车已行驶公里，单位万km</td>
</tr>
<tr>
<td>notRepairedDamage</td>
<td>汽车有尚未修复的损坏：是：0，否：1</td>
</tr>
<tr>
<td>regionCode</td>
<td>地区编码，已脱敏</td>
</tr>
<tr>
<td>seller</td>
<td>销售方：个体：0，非个体：1</td>
</tr>
<tr>
<td>offerType</td>
<td>报价类型：提供：0，请求：1</td>
</tr>
<tr>
<td>creatDate</td>
<td>汽车上线时间，即开始售卖时间</td>
</tr>
<tr>
<td>price</td>
<td>二手车交易价格（预测目标）</td>
</tr>
<tr>
<td>v系列特征</td>
<td>匿名特征，包含v0-14在内15个匿名特征</td>
</tr>
</tbody>
</table>
<h4 id="font-color-chocolate3-检查两数据集的数值类型font"><a class="markdownIt-Anchor" href="#font-color-chocolate3-检查两数据集的数值类型font"></a> <font color = 'chocolate'>3. 检查两数据集的数值类型</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Train_data.info()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span><br><span class="line">RangeIndex: 150000 entries, 0 to 149999</span><br><span class="line">Data columns (total 31 columns):</span><br><span class="line"> #   Column             Non-Null Count   Dtype  </span><br><span class="line">---  ------             --------------   -----  </span><br><span class="line"> 0   SaleID             150000 non-null  int64  </span><br><span class="line"> 1   name               150000 non-null  int64  </span><br><span class="line"> 2   regDate            150000 non-null  int64  </span><br><span class="line"> 3   model              149999 non-null  float64</span><br><span class="line"> 4   brand              150000 non-null  int64  </span><br><span class="line"> 5   bodyType           145494 non-null  float64</span><br><span class="line"> 6   fuelType           141320 non-null  float64</span><br><span class="line"> 7   gearbox            144019 non-null  float64</span><br><span class="line"> 8   power              150000 non-null  int64  </span><br><span class="line"> 9   kilometer          150000 non-null  float64</span><br><span class="line"> 10  notRepairedDamage  150000 non-null  object </span><br><span class="line"> 11  regionCode         150000 non-null  int64  </span><br><span class="line"> 12  seller             150000 non-null  int64  </span><br><span class="line"> 13  offerType          150000 non-null  int64  </span><br><span class="line"> 14  creatDate          150000 non-null  int64  </span><br><span class="line"> 15  price              150000 non-null  int64  </span><br><span class="line"> 16  v_0                150000 non-null  float64</span><br><span class="line"> 17  v_1                150000 non-null  float64</span><br><span class="line"> 18  v_2                150000 non-null  float64</span><br><span class="line"> 19  v_3                150000 non-null  float64</span><br><span class="line"> 20  v_4                150000 non-null  float64</span><br><span class="line"> 21  v_5                150000 non-null  float64</span><br><span class="line"> 22  v_6                150000 non-null  float64</span><br><span class="line"> 23  v_7                150000 non-null  float64</span><br><span class="line"> 24  v_8                150000 non-null  float64</span><br><span class="line"> 25  v_9                150000 non-null  float64</span><br><span class="line"> 26  v_10               150000 non-null  float64</span><br><span class="line"> 27  v_11               150000 non-null  float64</span><br><span class="line"> 28  v_12               150000 non-null  float64</span><br><span class="line"> 29  v_13               150000 non-null  float64</span><br><span class="line"> 30  v_14               150000 non-null  float64</span><br><span class="line">dtypes: float64(20), int64(10), object(1)</span><br><span class="line">memory usage: 35.5+ MB</span><br></pre></td></tr></table></figure>
<ol>
<li>可以看出，除了 notRepairedDamage 列为 object 类型外，其余列都是数值类型。从上面可以看到 notRepairedDamage 列有 ‘-’ 的字符，其余为文本类型数字，应该时导致改列属性编程 object 的原因。</li>
<li>model / bodyType / fuelType / gearbox 存在缺失值。</li>
</ol>
<h4 id="font-color-chocolate4-数据的描述性统计font"><a class="markdownIt-Anchor" href="#font-color-chocolate4-数据的描述性统计font"></a> <font color = 'chocolate'>4. 数据的描述性统计</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Train_data.describe()</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">SaleID</th>
<th style="text-align:right">name</th>
<th style="text-align:right">regDate</th>
<th style="text-align:right">model</th>
<th style="text-align:right">brand</th>
<th style="text-align:right">bodyType</th>
<th style="text-align:right">fuelType</th>
<th style="text-align:right">gearbox</th>
<th style="text-align:right">power</th>
<th style="text-align:right">kilometer</th>
<th style="text-align:right">…</th>
<th style="text-align:right">v_5</th>
<th style="text-align:right">v_6</th>
<th style="text-align:right">v_7</th>
<th style="text-align:right">v_8</th>
<th style="text-align:right">v_9</th>
<th style="text-align:right">v_10</th>
<th style="text-align:right">v_11</th>
<th style="text-align:right">v_12</th>
<th style="text-align:right">v_13</th>
<th style="text-align:right">v_14</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">count</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">1.500000e+05</td>
<td style="text-align:right">149999.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">145494.000000</td>
<td style="text-align:right">141320.000000</td>
<td style="text-align:right">144019.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">…</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
<td style="text-align:right">150000.000000</td>
</tr>
<tr>
<td style="text-align:right">mean</td>
<td style="text-align:right">74999.500000</td>
<td style="text-align:right">68349.172873</td>
<td style="text-align:right">2.003417e+07</td>
<td style="text-align:right">47.129021</td>
<td style="text-align:right">8.052733</td>
<td style="text-align:right">1.792369</td>
<td style="text-align:right">0.375842</td>
<td style="text-align:right">0.224943</td>
<td style="text-align:right">119.316547</td>
<td style="text-align:right">12.597160</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.248204</td>
<td style="text-align:right">0.044923</td>
<td style="text-align:right">0.124692</td>
<td style="text-align:right">0.058144</td>
<td style="text-align:right">0.061996</td>
<td style="text-align:right">-0.001000</td>
<td style="text-align:right">0.009035</td>
<td style="text-align:right">0.004813</td>
<td style="text-align:right">0.000313</td>
<td style="text-align:right">-0.000688</td>
</tr>
<tr>
<td style="text-align:right">std</td>
<td style="text-align:right">43301.414527</td>
<td style="text-align:right">61103.875095</td>
<td style="text-align:right">5.364988e+04</td>
<td style="text-align:right">49.536040</td>
<td style="text-align:right">7.864956</td>
<td style="text-align:right">1.760640</td>
<td style="text-align:right">0.548677</td>
<td style="text-align:right">0.417546</td>
<td style="text-align:right">177.168419</td>
<td style="text-align:right">3.919576</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.045804</td>
<td style="text-align:right">0.051743</td>
<td style="text-align:right">0.201410</td>
<td style="text-align:right">0.029186</td>
<td style="text-align:right">0.035692</td>
<td style="text-align:right">3.772386</td>
<td style="text-align:right">3.286071</td>
<td style="text-align:right">2.517478</td>
<td style="text-align:right">1.288988</td>
<td style="text-align:right">1.038685</td>
</tr>
<tr>
<td style="text-align:right">min</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">1.991000e+07</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.500000</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">-9.168192</td>
<td style="text-align:right">-5.558207</td>
<td style="text-align:right">-9.639552</td>
<td style="text-align:right">-4.153899</td>
<td style="text-align:right">-6.546556</td>
</tr>
<tr>
<td style="text-align:right">25%</td>
<td style="text-align:right">37499.750000</td>
<td style="text-align:right">11156.000000</td>
<td style="text-align:right">1.999091e+07</td>
<td style="text-align:right">10.000000</td>
<td style="text-align:right">1.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">75.000000</td>
<td style="text-align:right">12.500000</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.243615</td>
<td style="text-align:right">0.000038</td>
<td style="text-align:right">0.062474</td>
<td style="text-align:right">0.035334</td>
<td style="text-align:right">0.033930</td>
<td style="text-align:right">-3.722303</td>
<td style="text-align:right">-1.951543</td>
<td style="text-align:right">-1.871846</td>
<td style="text-align:right">-1.057789</td>
<td style="text-align:right">-0.437034</td>
</tr>
<tr>
<td style="text-align:right">50%</td>
<td style="text-align:right">74999.500000</td>
<td style="text-align:right">51638.000000</td>
<td style="text-align:right">2.003091e+07</td>
<td style="text-align:right">30.000000</td>
<td style="text-align:right">6.000000</td>
<td style="text-align:right">1.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">110.000000</td>
<td style="text-align:right">15.000000</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.257798</td>
<td style="text-align:right">0.000812</td>
<td style="text-align:right">0.095866</td>
<td style="text-align:right">0.057014</td>
<td style="text-align:right">0.058484</td>
<td style="text-align:right">1.624076</td>
<td style="text-align:right">-0.358053</td>
<td style="text-align:right">-0.130753</td>
<td style="text-align:right">-0.036245</td>
<td style="text-align:right">0.141246</td>
</tr>
<tr>
<td style="text-align:right">75%</td>
<td style="text-align:right">112499.250000</td>
<td style="text-align:right">118841.250000</td>
<td style="text-align:right">2.007111e+07</td>
<td style="text-align:right">66.000000</td>
<td style="text-align:right">13.000000</td>
<td style="text-align:right">3.000000</td>
<td style="text-align:right">1.000000</td>
<td style="text-align:right">0.000000</td>
<td style="text-align:right">150.000000</td>
<td style="text-align:right">15.000000</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.265297</td>
<td style="text-align:right">0.102009</td>
<td style="text-align:right">0.125243</td>
<td style="text-align:right">0.079382</td>
<td style="text-align:right">0.087491</td>
<td style="text-align:right">2.844357</td>
<td style="text-align:right">1.255022</td>
<td style="text-align:right">1.776933</td>
<td style="text-align:right">0.942813</td>
<td style="text-align:right">0.680378</td>
</tr>
<tr>
<td style="text-align:right">max</td>
<td style="text-align:right">149999.000000</td>
<td style="text-align:right">196812.000000</td>
<td style="text-align:right">2.015121e+07</td>
<td style="text-align:right">247.000000</td>
<td style="text-align:right">39.000000</td>
<td style="text-align:right">7.000000</td>
<td style="text-align:right">6.000000</td>
<td style="text-align:right">1.000000</td>
<td style="text-align:right">19312.000000</td>
<td style="text-align:right">15.000000</td>
<td style="text-align:right">…</td>
<td style="text-align:right">0.291838</td>
<td style="text-align:right">0.151420</td>
<td style="text-align:right">1.404936</td>
<td style="text-align:right">0.160791</td>
<td style="text-align:right">0.222787</td>
<td style="text-align:right">12.357011</td>
<td style="text-align:right">18.819042</td>
<td style="text-align:right">13.847792</td>
<td style="text-align:right">11.147669</td>
<td style="text-align:right">8.658418</td>
</tr>
</tbody>
</table>
<p>8 rows × 30 columns</p>
<p><font color='red'>Tran_data 总体概况如下：</font></p>
<ul>
<li>SaleID 取值从 0 到 149999，纯粹的连续整数序列；</li>
<li>name 的取值也类似，像是 label encoded；</li>
<li>regdate 本来应该时8位数字的字符串，现在被当成整数了，后面需要转化成日期格式；</li>
<li>model / bodyType / fuelType	/ gearbox 都做了类型编码，model 列存在一个缺失值；</li>
<li>power 最大值比较离群，可能搅拌车或者异常值, 最小值是 0，一般来说车子都是有动力的；</li>
<li>kilometer 的中位数时15万公里，并且这也是最大值，说明二手车交易的这些车至少一半都是行驶了不低于15万公里的；</li>
<li>regionCode 也做了 label encodeing；</li>
<li>seller 只有 0 和 1 两个取值，对模型没什么用；</li>
<li>offerType 只有 一个 0 取值，对模型没什么用；</li>
<li>creatDate 本来应该时8位数字的字符串，现在被当成整数了，后面需要转化成日期格式；</li>
<li>price 均值是 5923，而中位数只有 3250，明显是被平均了，一看最大值竟然有 99999， 这对于回归预测非常不利；</li>
<li>v 系列的列是做了标准化的。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 检查唯一的 object 类型特征</span><br><span class="line">Train_data[&#39;notRepairedDamage&#39;].value_counts()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0.0    111361</span><br><span class="line">-       24324</span><br><span class="line">1.0     14315</span><br><span class="line">Name: notRepairedDamage, dtype: int64</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 替换 ‘-’ 为缺失值</span><br><span class="line">Train_data[&#39;notRepairedDamage&#39;].replace(&#39;-&#39;, np.nan, inplace&#x3D;True)</span><br><span class="line">Train_data[&#39;notRepairedDamage&#39;].isna().sum()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">24324</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除无用特征</span><br><span class="line">for col in [&#39;seller&#39;, &#39;offerType&#39;]:</span><br><span class="line">    del Train_data[col]</span><br><span class="line">    del Test_data[col]</span><br></pre></td></tr></table></figure>
<h4 id="font-color-chocolate5-统计每列缺失值数量-占比font"><a class="markdownIt-Anchor" href="#font-color-chocolate5-统计每列缺失值数量-占比font"></a> <font color = 'chocolate'>5. 统计每列缺失值数量、占比</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Train_data.isna().sum().sort_values(ascending&#x3D;False)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">notRepairedDamage    24324</span><br><span class="line">fuelType              8680</span><br><span class="line">gearbox               5981</span><br><span class="line">bodyType              4506</span><br><span class="line">model                    1</span><br><span class="line">v_14                     0</span><br><span class="line">price                    0</span><br><span class="line">name                     0</span><br><span class="line">regDate                  0</span><br><span class="line">brand                    0</span><br><span class="line">power                    0</span><br><span class="line">kilometer                0</span><br><span class="line">regionCode               0</span><br><span class="line">creatDate                0</span><br><span class="line">v_0                      0</span><br><span class="line">v_13                     0</span><br><span class="line">v_1                      0</span><br><span class="line">v_2                      0</span><br><span class="line">v_3                      0</span><br><span class="line">v_4                      0</span><br><span class="line">v_5                      0</span><br><span class="line">v_6                      0</span><br><span class="line">v_7                      0</span><br><span class="line">v_8                      0</span><br><span class="line">v_9                      0</span><br><span class="line">v_10                     0</span><br><span class="line">v_11                     0</span><br><span class="line">v_12                     0</span><br><span class="line">SaleID                   0</span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Train_data.isna().sum() &#x2F; Train_data.shape[0]).sort_values(ascending&#x3D;False)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">notRepairedDamage    0.162160</span><br><span class="line">fuelType             0.057867</span><br><span class="line">gearbox              0.039873</span><br><span class="line">bodyType             0.030040</span><br><span class="line">model                0.000007</span><br><span class="line">v_14                 0.000000</span><br><span class="line">price                0.000000</span><br><span class="line">name                 0.000000</span><br><span class="line">regDate              0.000000</span><br><span class="line">brand                0.000000</span><br><span class="line">power                0.000000</span><br><span class="line">kilometer            0.000000</span><br><span class="line">regionCode           0.000000</span><br><span class="line">creatDate            0.000000</span><br><span class="line">v_0                  0.000000</span><br><span class="line">v_13                 0.000000</span><br><span class="line">v_1                  0.000000</span><br><span class="line">v_2                  0.000000</span><br><span class="line">v_3                  0.000000</span><br><span class="line">v_4                  0.000000</span><br><span class="line">v_5                  0.000000</span><br><span class="line">v_6                  0.000000</span><br><span class="line">v_7                  0.000000</span><br><span class="line">v_8                  0.000000</span><br><span class="line">v_9                  0.000000</span><br><span class="line">v_10                 0.000000</span><br><span class="line">v_11                 0.000000</span><br><span class="line">v_12                 0.000000</span><br><span class="line">SaleID               0.000000</span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>
<h4 id="font-color-chocolate5-分析预测值的分布font"><a class="markdownIt-Anchor" href="#font-color-chocolate5-分析预测值的分布font"></a> <font color = 'chocolate'>5. 分析预测值的分布</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig, axes &#x3D; plt.subplots(1, 2, figsize&#x3D;(12, 6))</span><br><span class="line">sns.distplot(Train_data[&#39;price&#39;], ax&#x3D;axes[0])</span><br><span class="line">sns.boxplot(Train_data[&#39;price&#39;], ax&#x3D;axes[1])</span><br></pre></td></tr></table></figure>
<p><img src="D:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Cprice.png" alt="" /></p>
<p><font color='red'>预测值的分布:</font></p>
<ol>
<li>可以看出 price 的分布是右偏类型，右边带着长尾；通过箱图可以看到大量的离群点。</li>
<li>由于 price 的分布像指数型，故可以控过反向运算 np.log1p() 来获得接近正态分布的预测值。这对于建模非常重要，因为模型的基本假设是数据服从独立同分布IID(independent and identically distributed)。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;Skewness: %f&quot; % Train_data[&#39;price&#39;].skew())</span><br><span class="line">print(&quot;Kurtosis: %f&quot; % Train_data[&#39;price&#39;].kurt())</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Skewness: 3.346487</span><br><span class="line">Kurtosis: 18.995183</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig, axes &#x3D; plt.subplots(1, 2, figsize&#x3D;(12, 6))</span><br><span class="line">sns.distplot(np.log1p(Train_data[&#39;price&#39;]), ax&#x3D;axes[0])</span><br><span class="line">sns.boxplot(np.log1p(Train_data[&#39;price&#39;]), ax&#x3D;axes[1])</span><br></pre></td></tr></table></figure>
<p><img src="D:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Cprice-log.png" alt="" /></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;Skewness: %f&quot; % np.log1p(Train_data[&#39;price&#39;]).skew())</span><br><span class="line">print(&quot;Kurtosis: %f&quot; % np.log1p(Train_data[&#39;price&#39;]).kurt())</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Skewness: -0.261727</span><br><span class="line">Kurtosis: -0.182127</span><br></pre></td></tr></table></figure>
<p>对 price 做 log 变换后其分布更接近正态分布了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 对每列的数据类型进行必要的转换</span><br><span class="line">date_cols &#x3D; [&#39;regDate&#39;, &#39;creatDate&#39;]</span><br><span class="line"></span><br><span class="line">def proc_date(x):</span><br><span class="line">    month &#x3D; x[4:6]</span><br><span class="line">    if month &#x3D;&#x3D; &#39;00&#39;:</span><br><span class="line">        month &#x3D;&#39;01&#39;</span><br><span class="line">    return x[:4] + month + x[6:]</span><br><span class="line"></span><br><span class="line">for col in date_cols:</span><br><span class="line">    Train_data[col] &#x3D;  pd.to_datetime(Train_data[col].astype(str).apply(proc_date))</span><br><span class="line">    Test_data[col] &#x3D;  pd.to_datetime(Test_data[col].astype(str).apply(proc_date))</span><br><span class="line">    </span><br><span class="line">    Train_data[col + &#39;_year&#39;] &#x3D; Train_data[col].dt.year</span><br><span class="line">    Train_data[col + &#39;_month&#39;] &#x3D; Train_data[col].dt.month</span><br><span class="line">    Train_data[col + &#39;_day&#39;] &#x3D; Train_data[col].dt.day</span><br><span class="line">    Train_data[col + &#39;_dayofweek&#39;] &#x3D; Train_data[col].dt.dayofweek</span><br><span class="line">    </span><br><span class="line">    Test_data[col + &#39;_year&#39;] &#x3D; Test_data[col].dt.year</span><br><span class="line">    Test_data[col + &#39;_month&#39;] &#x3D; Test_data[col].dt.month</span><br><span class="line">    Test_data[col + &#39;_day&#39;] &#x3D; Test_data[col].dt.day</span><br><span class="line">    Test_data[col + &#39;_dayofweek&#39;] &#x3D; Test_data[col].dt.dayofweek</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Train_data.columns</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Index([&#39;SaleID&#39;, &#39;name&#39;, &#39;regDate&#39;, &#39;model&#39;, &#39;brand&#39;, &#39;bodyType&#39;, &#39;fuelType&#39;,</span><br><span class="line">       &#39;gearbox&#39;, &#39;power&#39;, &#39;kilometer&#39;, &#39;notRepairedDamage&#39;, &#39;regionCode&#39;,</span><br><span class="line">       &#39;creatDate&#39;, &#39;price&#39;, &#39;v_0&#39;, &#39;v_1&#39;, &#39;v_2&#39;, &#39;v_3&#39;, &#39;v_4&#39;, &#39;v_5&#39;, &#39;v_6&#39;,</span><br><span class="line">       &#39;v_7&#39;, &#39;v_8&#39;, &#39;v_9&#39;, &#39;v_10&#39;, &#39;v_11&#39;, &#39;v_12&#39;, &#39;v_13&#39;, &#39;v_14&#39;,</span><br><span class="line">       &#39;regDate_year&#39;, &#39;regDate_month&#39;, &#39;regDate_day&#39;, &#39;regDate_dayofweek&#39;,</span><br><span class="line">       &#39;creatDate_year&#39;, &#39;creatDate_month&#39;, &#39;creatDate_day&#39;,</span><br><span class="line">       &#39;creatDate_dayofweek&#39;],</span><br><span class="line">      dtype&#x3D;&#39;object&#39;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 将特征进行分类</span><br><span class="line">cate_cols &#x3D; [&#39;name&#39;, &#39;model&#39;, &#39;brand&#39;, &#39;bodyType&#39;, &#39;fuelType&#39;, &#39;gearbox&#39;, &#39;notRepairedDamage&#39;, &#39;regionCode&#39;]</span><br><span class="line">num_cols &#x3D; [&#39;power&#39;, &#39;kilometer&#39;] + [&#39;v_&#123;&#125;&#39;.format(i) for i in range(15)]</span><br><span class="line">date_cols &#x3D; [&#39;regDate_year&#39;, &#39;regDate_month&#39;, &#39;regDate_day&#39;, &#39;regDate_dayofweek&#39;, &#39;creatDate_month&#39;, &#39;creatDate_day&#39;, &#39;creatDate_dayofweek&#39;]</span><br><span class="line">cols &#x3D; date_cols + cate_cols + num_cols</span><br></pre></td></tr></table></figure>
<h4 id="font-color-chocolate8-数据特征分析font"><a class="markdownIt-Anchor" href="#font-color-chocolate8-数据特征分析font"></a> <font color = 'chocolate'>8. 数据特征分析</font></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">corr_matrix &#x3D; Train_data[num_cols].corr()</span><br><span class="line">sns.heatmap(corr_matrix.mask(lambda x: abs(x)&lt;.4))</span><br></pre></td></tr></table></figure>
<p><img src="D:%5CCode%5CGitHub%5Cblog%5Csource_posts%5C2020-03-24-Used-Cars-Price-Predition-EDA%5Ccorr.png" alt="" /></p>
<p>从图中可以看出v系列不少呈强正、负相关关系。</p>
<p>&lt;未完待续&gt;</p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Competition/" rel="tag"><i class="fa fa-tag"></i> Competition</a>
              <a href="/tags/Novice/" rel="tag"><i class="fa fa-tag"></i> Novice</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2020/03/21/Evaluating-Machine-Learning-Models/" rel="prev" title="机器学习的常用模型评估指标">
      <i class="fa fa-chevron-left"></i> 机器学习的常用模型评估指标
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#font-color-chocolate什么是-eda-以及为什么-edafont"><span class="nav-number">1.</span> <span class="nav-text"> 什么是 EDA ，以及为什么 EDA</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#font-color-chocolate如何-edafont"><span class="nav-number">2.</span> <span class="nav-text"> 如何 EDA</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#font-color-chocolate工具font"><span class="nav-number">2.1.</span> <span class="nav-text"> 工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#font-color-chocolate分析操作font"><span class="nav-number">2.2.</span> <span class="nav-text"> 分析操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#font-color-chocolate开始分析font"><span class="nav-number">2.3.</span> <span class="nav-text"> 开始分析</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Tony Lam</p>
  <div class="site-description" itemprop="description">Beyond cutting and trimming.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tony Lam</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri == 'https://tony1am.github.io/blog/2020/03/24/Used-Cars-Price-Predition-EDA/',]
      });
      });
  </script>

</body>
</html>
